@model IEnumerable<ResumeCheckSystem.Models.SkillCategory>

<h2>How to create a resume?</h2>
<p>Click on skills you have and set the level of knowledges</p>

<div>
    <form asp-action="CreateResumeForm" method="post">
        @foreach (var category in ViewBag.SkillCategories)
        {
            <h2>@category.CategoryName</h2>
            <table class="table" style="border-color: transparent;">
                <th>Skill</th>
                <th>Level</th>
                @foreach (var skillGroup in ViewBag.SkillsByCategory)
                {
                    if (skillGroup.CategoryId == category.Id)
                    {
                        foreach (var skill in skillGroup.Skills)
                        {
                            <tr>
                                <td style="width: 50%;">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="selectedSkills" value="@skill.SkillName" data-toggle="skill-dropdown">
                                        <label class="form-check-label">@skill.SkillName</label>
                                    </div>
                                </td>
                                <td style="width: 20%;" class="d-flex justify-content-start">
                                    <select class="form-select skill-level" name="skillLevels" disabled>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                    </select>
                                </td>
                            </tr>
                        }
                    }
                }
            </table>
        }
    <button class="btn btn-primary" type="submit">Submit</button>
</form>
</div>

<div>
    <h2>@ViewBag.CheckedSkills</h2>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const checkboxes = document.querySelectorAll('input[type="checkbox"][data-toggle="skill-dropdown"]');
        checkboxes.forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
                const dropdown = this.closest('tr').querySelector('.skill-level');
                dropdown.disabled = !this.checked;
            });
        });
    });
</script>